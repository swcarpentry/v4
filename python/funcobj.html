---
layout: lesson
title: First Class Functions
lesson_title: Python
prev: v4/python/func.html
next: v4/python/lib.html
uplink: v4/python/index.html
pdf: v4/python/funcobj.pdf
ppt: v4/python/funcobj.ppt
youtube: {"slug": "D3FDVmpROcI", "time": "00:08:01.70"}
---
<div class="transcript">
  <div class="media">
    <img class="media-object pull-left" src="funcobj/001.png" />
    <p class="media-body">Hello, and welcome to the ninth episode of the Software Carpentry lecture on Python.  In this episode, we'll take a closer look at some things you can do with functions that will allow you to do more with less code.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/002.png" />
    <p class="media-body">As we've seen in previous episodes, an integer is just 32 bits of data&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/003.png" />
    <p class="media-body">&hellip;that a variable can refer to.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/004.png" />
    <p class="media-body">And a string is just a sequence of bytes&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/005.png" />
    <p class="media-body">&hellip;that variables can also refer to.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/006.png" />
    <p class="media-body">Well, it turns out that a function is just another sequence of bytes&mdash;ones that happen to represent instructions&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/007.png" />
    <p class="media-body">&hellip;and yes, variables can refer to them to.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/008.png" />
    <p class="media-body">This insight&mdash;the fact that code is just another kind of data, and can be manipulated like integers or strings&mdash;is one of the most useful and powerful in all computing.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/009.png" />
    <p class="media-body">To understand why, let's have a closer look at what actually happens when we define a function.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/010.png" />
    <p class="media-body">These two lines of code tell Python that <code>threshold</code> is a function that returns one over the sum of the values in <code>signal</code>.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/011.png" />
    <p class="media-body">When we define it, Python translates the statements in the function into a blob of bytes, then creates a variable called <code>threshold</code> and makes it point at that blob.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/012.png" />
    <p class="media-body">This is not really any different from assigning the string <code>'alan turing'</code> to the variable <code>name</code>: the only difference is what's in the memory the variable points to.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/013.png" />
    <p class="media-body">Well, if <code>threshold</code> is just a reference to a value in memory, we should be able to assign that reference to another variable.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/014.png" />
    <p class="media-body">Here's our starting point once again.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/015.png" />
    <p class="media-body">And here's the assignment: <code>t = threshold</code>.  As you can see, <code>t</code> now points to the same data as <code>threshold</code>: it is an alias for the function.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/016.png" />
    <p class="media-body">To prove this is so, let's try calling <code>t</code>.  The result is exactly what we would get if we called <code>threshold</code> with the same parameters, because <code>t</code> and <code>threshold</code> <em>are</em> the same function.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/017.png" />
    <p class="media-body">Here's another thought: if the function is "just" data, can we put a reference to it in a list?</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/018.png" />
    <p class="media-body">Let's define two functions, <code>area</code> and <code>circumference</code>, each of which takes a circle's radius as a parameter and returns the appropriate value.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/019.png" />
    <p class="media-body">Once those functions are defined, we can put them into a list like this.  Of course, what we really mean is we're copying the references to the functions stored in the variables <code>area</code> and <code>circumference</code> into the list, so that its first and second elements refer to the same blobs of instructions.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/020.png" />
    <p class="media-body">We can now loop through the functions in the list, calling each in turn.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/021.png" />
    <p class="media-body">Sure enough, the output is what we would get if we called <code>area</code> and then <code>circumference</code> with the parameter 1.0.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/022.png" />
    <p class="media-body">Let's go a little further.  Instead of storing a reference to a function in a list, let's pass that reference into another function, just as we would pass a reference to an integer, a string, or a list.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/023.png" />
    <p class="media-body">Here's a function called <code>call_it</code> that takes two parameters: a reference to some other function, and some other value.  All <code>call_it</code> does is call that other function with the given value as a parameter.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/024.png" />
    <p class="media-body">Let's test it with <code>area</code> and 1.0: that's right.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/025.png" />
    <p class="media-body">And with <code>circumference</code> and 1.0: right again.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/026.png" />
    <p class="media-body">So far, so pointless, but now it's time for the payoff: functions of functions.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/027.png" />
    <p class="media-body">Here's a function called <code>do_all</code> that, as its name suggests, applies some function&mdash;anything at all that takes one argument&mdash;to each value in a list, and returns a list of the results.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/028.png" />
    <p class="media-body">If we call <code>do_all</code> with <code>area</code> and a list of numbers&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/029.png" />
    <p class="media-body">&hellip;we get what we would get if we called <code>area</code> directly on each number in turn.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/030.png" />
    <p class="media-body">And if we define a function to "slim down" strings of text by throwing away their first and last characters&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/031.png" />
    <p class="media-body">&hellip;we can apply it to every string in a list, without having to copy the code that loops through the list, calls the function, and concatenates the results.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/032.png" />
    <p class="media-body">Functions that operate on other functions are called <em>higher-order functions</em>.  They're common in mathematics: integration, for example, is a function that takes some other function and two endpoints as parameters.  In programming, higher-order functions allow us to re-use control flow rather than rewriting it.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/033.png" />
    <p class="media-body">Here's another example.  <code>combine_values</code> takes a function and a list of values as parameters, and "adds up" the values in the list using the function provided, returning a single value as its result.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/034.png" />
    <p class="media-body">To show how this works, let's define <code>add</code> and <code>mul</code> to add and multiply values.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/035.png" />
    <p class="media-body">If we combine 1, 3, and 5 with <code>add</code>, we get their sum, 9.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/036.png" />
    <p class="media-body">If we combine the same values with <code>mul</code>, we get their product, 15.  This same higher-order function <code>combine_values</code> could concatenate lists of strings, too, or multiply several matrices together, or whatever else we wanted, without us writing the loop logic ever again.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/037.png" />
    <p class="media-body">Higher-order functions are a good thing because they let us do more with less code.  If we don't use higher-order functions&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/038.png" />
    <p class="media-body">&hellip;then we have to write one function for each combination of data structure and operation, i.e., one function to add numbers, another to concatenate strings, a third to sum matrices&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/039.png" />
    <p class="media-body">&hellip;and so on.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/040.png" />
    <p class="media-body"><em>With</em> higher-order functions, on the other hand&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/041.png" />
    <p class="media-body">&hellip;we only write one function for each basic operation, and one function for each kind of data structure&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/042.png" />
    <p class="media-body">&hellip;and since A plus B is usually a lot smaller than A times B, this saves us coding, testing, and debugging.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/043.png" />
    <p class="media-body">Of course, we have to know <em>something</em> about the function our higher-order function is operating on&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/044.png" />
    <p class="media-body">&hellip;like how many arguments it takes.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/045.png" />
    <p class="media-body">But in Python and many other languages, we can even get around that.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/046.png" />
    <p class="media-body">Here's a function called <code>add_all</code> that sums up values using plus.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/047.png" />
    <p class="media-body">Notice the '*' in front of the parameter <code>args</code>.  This tells Python to take all of the parameters passed into the function when it's called and put them together in a special type of list called a tuple, which we'll explore in more detail in a couple of lectures.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/048.png" />
    <p class="media-body">If we call <code>add_all</code> with no arguments, the tuple that's assigned to <code>args</code> has no elements, so <code>add_all</code> returns 0.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/049.png" />
    <p class="media-body">If we call <code>add_all</code> with the integers 1, 2, and 3, though, <code>args</code> has three elements, which <code>add_all</code> sums up to get 6.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/050.png" />
    <p class="media-body">We can use this "catch-all" parameter with regular parameters, as long as the catch-all comes last.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/051.png" />
    <p class="media-body">Here, for example, is another version of <code>combine_values</code>.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/052.png" />
    <p class="media-body">The only difference between it and the previous version is the '*' in front of the parameter <code>values</code>.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/053.png" />
    <p class="media-body">This small change means that we don't have to put the values we want to combine into a list before calling the function: the first actual parameter is assigned to <code>func</code> as before, and everything else goes into the tuple <code>values</code>.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/054.png" />
    <p class="media-body">As an aside before we finish this episode, what do you think <code>combine_values</code> will do if we only provide a function, and no values for that function to operate on?</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/055.png" />
    <p class="media-body">More importantly, what do you think it <em>should</em> do?</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/056.png" />
    <p class="media-body">Several higher-order functions are actually built in to Python.  One is <code>filter</code>, which constructs a new list containing all the values in an original list for which some function is true.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/057.png" />
    <p class="media-body">Another is <code>map</code>, which applies a function to every element of a list, returning a list of results&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/058.png" />
    <p class="media-body">&hellip;and then there's <code>reduce</code>, which combines values using a binary function, returning a single value as a result.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/059.png" />
    <p class="media-body">For example, if <code>positive</code> is True when its argument is greater than or equal to 0, then <code>filter</code> of <code>positive</code> and a list of numbers returns a list of non-negative numbers.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/060.png" />
    <p class="media-body">If <code>negate</code> changes the sign of its argument, <code>map</code> of <code>negate</code> returns a list of negated values&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/061.png" />
    <p class="media-body">&hellip;and of course, using <code>reduce</code> with <code>add</code> returns the sum of the values in the list.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/062.png" />
    <p class="media-body">It usually takes a while to get used to working with higher-order functions, but while the ideas are digesting, let's step back and ask, "What <em>is</em> programming anyway?"</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/063.png" />
    <p class="media-body">Novices usually think that it means writing instructions for a computer.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/064.png" />
    <p class="media-body">But more experienced programmers think of it as creating and combining abstractions.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/065.png" />
    <p class="media-body">When we're programming, our goal is to spot a pattern, like "combine all elements of a list using a binary function".</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/066.png" />
    <p class="media-body">And then write it down once, as clearly as possible&hellip;</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/067.png" />
    <p class="media-body">&hellip;so that we can build more patterns on top of it.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/068.png" />
    <p class="media-body">Be cautious, though: the limits of human short-term memory still apply.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/069.png" />
    <p class="media-body">If you pile too many abstractions on top of one another, it can be difficult to figure out what the end result actually does.</p>
  </div>
  <div class="media">
    <img class="media-object pull-left" src="funcobj/070.png" />
    <p class="media-body">Thank you.</p>
  </div>
</div>
